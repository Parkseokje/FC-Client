"use strict";requirejs(["jquery","bootstrap","jquery_datatable","bootstrap_datatable","fastclick","jqueryValidate"],function(e){function a(e,a){return e+a}function t(e,a){return Number(e-a)}var n=e;n("#table_agent").DataTable({paging:!1,lengthChange:!0,searching:!1,ordering:!0,info:!0,autoWidth:!0});var r=n("#frm_create_agent"),i=(n(".btn-create-agent-submit"),n("#frm_set_agent_password")),l=(n(".create-agent-code"),n(".pass")),u=(n(".re_pass"),n(".btn-dropdown-action")),d=n(".credit-to"),o=n(".debit-to"),c=n(".my_balance"),s=null,m=null,b=null,_=null,g=null,f=null,p=null,v=null;u.on("click",function(){s=n(this).attr("data-code"),m=Number(n(this).attr("data-balance")),b=n(this).attr("data-parent_id"),_=n(this).attr("data-layer"),g=n(this).attr("data-suspend")}),d.bind("click",function(){var e=n("#modal_credit_to");e.modal("show"),e.find("#credit_target").val(s),e.find("#credit_balance").val(m)}),o.bind("click",function(){var e=n("#modal_debit_to");e.modal("show"),e.find("#debit_target").val(s),e.find("#debit_balance").val(m)}),n(".set-agent-password").on("click",function(){var e=n("#setAgentPassword");e.modal("show"),e.find("#code").val(s)}),n("#select-agent-code").on("change",function(){var e=n(this).find("option:selected").attr("data-layer");n("#agent-layer").val(e)}),r.validate({submitHandler:function(){return!!confirm("작업을 완료하겠습니까?")},rules:{create_agent_code:{required:!0,minlength:4,remote:{async:!1,url:"/api/v1/agent/duplicated",type:"post",dataFilter:function(e){var a=JSON.parse(e);return console.log(a),!a.success||!a.duplicated||'"이미 사용중인 Agent code 입니다."'}}},pass:{required:!0,minlength:4},re_pass:{required:!0,minlength:4,equalTo:l}},messages:{create_agent_code:{required:"필수로입력하세요",minlength:"최소 {0}글자이상이어야 합니다"},pass:{required:"필수로입력하세요",minlength:"최소 {0}글자이상이어야 합니다"},re_pass:{required:"필수로입력하세요",minlength:"최소 {0}글자이상이어야 합니다",equalTo:"비밀번호가 일치하지 않습니다."}}}),i.validate({submitHandler:function(){return!!confirm("작업을 완료하겠습니까?")},rules:{pass:{required:!0,minlength:4},re_pass:{required:!0,minlength:4,equalTo:"#set_password"}},messages:{pass:{required:"필수로입력하세요",minlength:"최소 {0}글자이상이어야 합니다"},re_pass:{required:"필수로입력하세요",minlength:"최소 {0}글자이상이어야 합니다",equalTo:"비밀번호가 일치하지 않습니다."}}});var q=n("#credit_amount"),h=n("#credit_balance"),y=n("#credit_sum_balance"),w=(n(".btn-credit-to-submit"),n("#frm_credit_to"));q.bind("change",function(){p=Number(h.val()),v=Number(q.val()),f=a(p,v),c.val(t(Number(n("#my_current_balance").val()),v)),y.val(f)}),w.validate({submitHandler:function(){return!!confirm("입력하신 Amount : "+v+"$ 총합산 Balance : "+f+"$가 맞습니까?")},rules:{target:{required:!0},balance:{required:!0},sum_balance:{required:!0,min:1},amount:{required:!0,range:[1,n("#my_current_balance").val()]},memo:{required:!0}}});var N=n("#debit_amount"),k=n("#debit_balance"),A=n("#debit_sum_balance"),T=n("#frm_debit_to");N.bind("change",function(){p=Number(k.val()),v=Number(N.val()),f=t(p,v),c.val(a(Number(n("#my_current_balance").val()),v)),A.val(f)}),T.validate({submitHandler:function(){return!!confirm("입력하신 Amount : "+v+"$ 총합산 Balance : "+f+"$가 맞습니까?")},rules:{target:{required:!0},sum_balance:{required:!0,min:0},balance:{required:!0},amount:{required:!0,min:1},memo:{required:!0}}}),n(".set-suspend").on("click",function(){if(confirm(s+"Agent를 정지 시키겠습니까?")){var e=s;n.post("/api/v1/agent/to/suspend",{code:e,suspend:1}).done(function(e){console.log(e)})}}),n(".set-wake-up").on("click",function(){if(confirm(s+"Agent를 활성화 시키겠습니까?")){var e=s;n.post("/api/v1/agent/to/suspend",{code:e,suspend:0}).done(function(e){console.log(e)})}})});
//# sourceMappingURL=../../maps/_bak/agents.js.map
