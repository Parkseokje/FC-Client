{"version":3,"sources":["evaluate.js"],"names":["requirejs","Util","$","ratingLogger","type","url","data","course_id","course_rating","teacher_rating","attr","done","res","console","window","location","href","next_url","error","msg","btn_submit","parent","initialRating","totalStars","disableAfterRate","starShape","starSize","emptyColor","hoverColor","activeColor","useGradient","readOnly","callback","$el","currentRating","hasClass","val","e","preventDefault","alert"],"mappings":"AAQA,YAEAA,YAIE,SAAA,gBAAA,SACiCC,GA+C/BC,QAAOC,KACLC,EAAAA,MACAC,KAAK,OACLC,IAAAA,gBACEC,MACAC,UAAAA,EACAC,cAAAA,EAAgBA,KAAeC,eAH3BD,eAAAA,EAAAC,KAAA,kBAMNC,KAAKC,SAALA,GACEC,EAAAA,QAGDC,OAAAC,SAAAC,KAAAC,EAJDJ,QAEOK,MAAAN,EAAAO,OAzDTF,GAAAA,GAAAA,GAAWG,OAAAA,EAFbA,EAGEb,EAAYa,eAHdH,EAIET,EAAkBa,SAAAX,KAAA,QAJpBH,EAI0Ca,EAAAd,KAAA,aACxCG,EAAiBP,EAAE,qBAAnBO,EAAiBP,EAAE,qBAInBoB,GAAAA,cAAAA,YACAC,cAFyB,EAGzBC,WAAAA,EACAC,kBAAW,EACXC,UAAU,UACVC,SAAAA,GACAC,WAAY,OACZC,WAAAA,UACAC,YAAa,UACbC,aAAU,EACVC,UAAU,EACRC,SAAA,SAASC,EAAeA,GAAxBD,EAAIvB,KAAK,cAAewB,GAGpBD,EAAAE,SAAWC,UADflC,EAAA,WAEeiC,IAAAA,GACXF,EAAFE,SAAkBD,YACnBhC,EAAA,YAAAkC,IAAAF,MAMHG,EAAEC,GAAAA,QAAF,SAAAD,GAGEvB,MAHFuB,GAAEC,iBAGA,KAAAxB,EAAaJ,KAAA,gBAAb,KAAAD,EAAAC,KAAA,gBACAI,OAAOyB,MAAP,cACD,KAGCpC,OAAAA,QAAAA,kBADFA","file":"../javascripts/evaluate.js","sourcesContent":["/**\n * Created by parkseokje\n * 강의평가\n * TODO\n * 1. 강의/강사평가\n * 2. 평가 완료 후 완료페이지로 이동\n */\n\n'use strict';\n\nrequirejs([\n  'common',\n  'jqueryRating'\n], function (Util) {\n  var $ = $ || window.$,\n    btn_submit = $('.btn_submit'), // 평가 제출하기\n    next_url = btn_submit.parent().attr('href'),\n    course_id = btn_submit.data('course-id'),\n    course_rating = $('.my-rating.course'), // 강의평가\n    teacher_rating = $('.my-rating.teacher'); // 강사평가\n\n  // http://nashio.github.io/star-rating-svg/demo/\n  $('.my-rating').starRating({\n    initialRating: 0,\n    totalStars: 5,\n    disableAfterRate: false,\n    starShape: 'rounded',\n    starSize: 30,\n    emptyColor: '#000',\n    hoverColor: '#4baf4d',\n    activeColor: '#4baf4d',\n    useGradient: false,\n    readOnly: false,\n    callback: function (currentRating, $el) {\n      $el.attr('data-rating', currentRating);\n\n      if ($el.hasClass('course')) {\n        $('#course').val(currentRating);\n      } else if ($el.hasClass('teacher')) {\n        $('#teacher').val(currentRating);\n      }\n    }\n  });\n\n  // 제출하기\n  btn_submit.on('click', function (e) {\n    e.preventDefault();\n\n    if (course_rating.attr('data-rating') === '' || teacher_rating.attr('data-rating') === '') {\n      window.alert('평가부탁드립니다.');\n      return false;\n    }\n\n    if (window.confirm('제출하시겠습니까?')) {\n      ratingLogger();\n    } else {\n      return false;\n    }\n  });\n\n  // 강의/강사평가 기록\n  function ratingLogger () {\n    $.ajax({\n      type: 'POST',\n      url: '/evaluate/log',\n      data: {\n        course_id: course_id,\n        course_rating: course_rating.attr('data-rating'),\n        teacher_rating: teacher_rating.attr('data-rating')\n      }\n    }).done(function (res) {\n      if (!res.success) {\n        console.error(res.msg);\n      } else {\n        window.location.href = next_url;\n      }\n    });\n  }\n});\n"]}