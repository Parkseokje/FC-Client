{"version":3,"sources":["components/aquanmanager_service.js"],"names":["window","define","Util","self","AquaNManagerService","options","this","init","prototype","extend","b","hasOwnProperty","key","a","extendOptions","getDeviceType","navigator","userAgent","match","startPlayer","deviceType","params","get","device","video","training_user_id","videoUrl","course_id","courseId","course_list_id","video_id","videoId","video_status","total_played_seconds","totalPlayedSeconds","videoStatus","then","location","href","res","setTimeout","data","iosUrl","now","getTime","time","catch","err","androidUrl","startBasePlayer","return_url","returnUrl","Date","console"],"mappings":"AAAA,YACAA,QAAOC,QAAPD,UAGE,SAAWE,GAGTC,QAAOC,GAAPC,GAAAF,EAAOG,KAGPH,EAAKI,cAALF,GACDF,EAAAI,OAPD,GAAIJ,GAAO,IAoHX,OA1GEC,GAAAI,WAEAH,WAEEI,OAAK,SAAWC,EAAGA,GACjB,IAAA,GAAMC,KAAAA,GACFC,EAAAA,eAAFA,KACDC,EAAAD,GAAAF,EAAAE,GARyB,OAAAC,IAc5BC,cAAA,SAAoBL,GACpBH,KAAKG,QAAOH,KAAKD,UAASA,KAA1BA,SAf4BC,KAAAG,OAAAH,KAAAD,QAAAA,IAmB5BE,KAAA,aAGAQ,cAAKC,WACH,MAAAA,WAAAC,UAAAC,MAAA,YAAAF,UAAAC,UAAAC,MAAA,SACK,MACEF,UAAPC,UAAAC,MAAA,YACK,UACEF,UAAPC,UAAAC,MAAA,QACD,UADC,IAIFC,YAAIC,WAAJ,GAAIA,GAAajB,EAAKY,eAKpBM,QAAAA,MAAQC,IAAA,sBACNC,QACAC,OAAOJ,EACPK,MAAAA,KAAAA,QAAkBC,SAClBC,iBAAgBtB,KAALA,QAAauB,eACxBC,UAAAA,KAAgBxB,QAAKA,SACrByB,eAAezB,KAAAA,QAAQ0B,aACvBC,SAAAA,KAAc3B,QAAKA,QACnB4B,aAAmCC,KAAnCD,KAAAA,QAA2B5B,YAAQ6B,KAAb7B,QAAA8B,YAAyC,WARzDF,qBAAA,KAAA3B,KAAAD,QAAA6B,mBAAA5B,KAAAD,QAAA6B,mBAAA,KAaRE,KAAIhB,SAAAA,GAEF,GAAA,QAAAA,EAAA,CACApB,GAAAA,IAAOqC,GAASC,OAAOC,SAEvBC,QAAAA,SAAWF,KAAYC,EAAAE,KAAAC,OAEnBF,WAAIG,WACJH,WAAKG,YACIN,GAAAA,OAAPO,UACDC,EAAA,MACA7C,OALHqC,SAAAC,KAAA,8DAOG,KACL,SACuBC,YAAhBF,IAGVS,OAAMT,SAAUU,KAAKR,EAAAE,KAAAO,cAnEMF,MAAA,SAAAC,GAuE9BE,QAAAA,IAAAA,MAGQA,gBAAA,WAFN,GAAI7B,GAAajB,EAAKY,eAOlBS,QAAAA,MAAOF,IAAKjB,2BACZ6C,QAHM3B,OAAAH,EAMTgB,MAAK9B,KAAAD,QAAeqB,SACnBwB,WAAI9B,KAAef,QAAO8C,aAGxBnD,KAAAA,SAAOqC,GAHT,GAAmB,QAAfjB,EAAsB,CAKxBoB,GAAAA,IAAW,GAAAY,OAAYR,SAEnB5C,QAAAqC,SAAWC,KAAAC,EAAYK,KAAbF,OAER1C,WAAAA,WACDwC,WAAA,YAJH,GAAAY,OAAAR,UADFC,EAAA,MAQK7C,OAAIoB,SAAAA,KAAe,8DAEzB,KAEF0B,SACC,YAAA1B,IA1BFpB,OAAAqC,SAAAC,KAAAC,EAAAE,KAAAO,cAyBCF,MAAM,SAAUC,GAMrBM,QAAOjD,IAAAA,OAAAA","file":"../../javascripts/components/aquanmanager_service.js","sourcesContent":["'use strict';\nwindow.define([\n  'common'\n], function (Util) {\n  var self = null;\n\n  function AquaNManagerService (options) {\n    self = this;\n\n    self.extendOptions(options);\n    self.init();\n  }\n\n  AquaNManagerService.prototype = {\n    // 옵션 저장 변수\n    options: {},\n    // 옵션 저장 함수\n    extend: function (a, b) {\n      for (var key in b) {\n        if (b.hasOwnProperty(key)) {\n          a[key] = b[key];\n        }\n      }\n      return a;\n    },\n    // 옵션 확장\n    extendOptions: function (options) {\n      this.options = this.extend({}, this.options);\n      this.extend(this.options, options);\n    },\n    // 컴포넌트 초기화\n    init: function () {\n      // console.log('init');\n    },\n    getDeviceType: function () {\n      if ((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPad/i))) {\n        return 'ios';\n      } else if (navigator.userAgent.match(/Android/i)) {\n        return 'android';\n      } else if (navigator.userAgent.match(/Mac/i)) {\n        return 'mac';\n      }\n    },\n    startPlayer: function () {\n      var deviceType = self.getDeviceType();\n\n      // console.log('haha', this.options.videoStatus);\n\n      window.axios.get('/api/v1/aquaplayer', {\n        params: {\n          device: deviceType,\n          video: this.options.videoUrl,\n          training_user_id: this.options.trainingUserId,\n          course_id: this.options.courseId,\n          course_list_id: this.options.courseListId,\n          video_id: this.options.videoId,\n          video_status: this.options.videoStatus !== '' ? this.options.videoStatus : 'progress',\n          total_played_seconds: this.options.totalPlayedSeconds !== '' ? this.options.totalPlayedSeconds : 0\n        }\n      })\n      .then(function (res) {\n        // console.log(res.data);\n        if (deviceType === 'ios') {\n          var time = (new Date()).getTime();\n          // console.log(res.data.iosUrl);\n          window.location.href = res.data.iosUrl;\n\n          setTimeout(function () {\n            setTimeout(function () {\n              var now = (new Date()).getTime();\n              if ((now - time) < 400) {\n                window.location.href = 'https://itunes.apple.com/kr/app/aquanmanager/id1048325731';\n              }\n            }, 10);\n          }, 300);\n        } else if (deviceType === 'android') {\n          // console.log(res.data.androidUrl);\n          window.location.href = res.data.androidUrl;\n        }\n      })\n      .catch(function (err) {\n        console.log(err);\n      });\n    },\n    startBasePlayer: function () {\n      var deviceType = self.getDeviceType();\n\n            // console.log('haha', this.options.videoStatus);\n\n      window.axios.get('/api/v1/aquaplayer-base', {\n        params: {\n          device: deviceType,\n          video: this.options.videoUrl,\n          return_url: this.options.returnUrl\n        }\n      })\n      .then(function (res) {\n        if (deviceType === 'ios') {\n          var time = (new Date()).getTime();\n\n          window.location.href = res.data.iosUrl;\n\n          setTimeout(function () {\n            setTimeout(function () {\n              var now = (new Date()).getTime();\n              if ((now - time) < 400) {\n                window.location.href = 'https://itunes.apple.com/kr/app/aquanmanager/id1048325731';\n              }\n            }, 10);\n          }, 300);\n        } else if (deviceType === 'android') {\n          window.location.href = res.data.androidUrl;\n        }\n      })\n      .catch(function (err) {\n        console.log(err);\n      });\n    }\n  };\n\n  return AquaNManagerService;\n});\n\n"]}