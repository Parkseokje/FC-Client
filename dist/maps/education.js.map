{"version":3,"sources":["education.js"],"names":["window","requirejs","Util","$inputSearchText","inputCourse","$","optSearchType","btnSearchCourse","$notActivelistItem","$listItem","yearmonth","$inputSearchBy","index","undefined","this","data","insertBefore","val","focus","prop","selectAssignMonth","on","e","preventDefault","alert","change","attr","btnRadio","searchBy","searchText","location","href","pageNum","id","which","click","hasClass","params","url","res","training_user_id","course_id","can_progress","then","prev_course_name","eduName","catch","error","console"],"mappings":"YAAAA,QAAOC,WACL,SADFD,aAIA,SAAUE,GAKR,GAQIC,GARAC,EAAAA,GAAAA,OAAgBC,EAEhBC,EAAAA,EAAgBD,gBAChBE,EAAoBF,EAAA,sBACpBG,EAAAA,EAAAA,oCACAC,EAAcJ,EAAA,oBACdK,EAAJL,EAAA,2BACIM,EAAAA,EAAAA,cAAAA,EAAiBN,EAAE,aAGrBF,EAAYE,EAAA,cAEVA,GAAA,WASA,GAREK,EAAAA,cAAYL,KAAE,SAAWO,OADTC,KAAdH,GAA2BA,IAAcL,EAAES,MAAMC,KAAK,eAGxDV,EAAEA,EAAAS,MAAAC,KAAA,aAJNV,EAAA,2EAAAK,EAAA,SAAAM,aAAAX,EAAAS,UAUEH,EAAAM,MACEb,OAAAA,EAAAa,OACAb,IAAAA,SACAC,EAAEa,QACFd,EAAAa,IAAAd,EAAAc,OACFZ,EAAA,uBAAAc,KAAA,WAAA,EACEC,MACAA,KAAAA,QACAf,EAAEa,QACFE,EAAAH,IAAAd,EAAAc,OADAZ,EAAE,uBAAuBc,KAAK,WAAW,MAW9Cf,EAFDiB,GAAA,QAAA,WACEhB,EAAE,uBAAuBc,KAAK,WAAW,KAK1CC,EAFDC,GAAA,QAAA,WACEhB,EAAE,uBAAuBc,KAAK,WAAW,KAKzCnB,EAAaqB,GAAA,QAAA,SAAbC,GAFFA,EAAAC,iBAEEvB,OAAOwB,MAAM,qBAKblB,EAAAmB,OAAA,WAEErB,OADGC,EAAAS,MAAAY,KAAA,OAEH,IAAA,qBACFtB,EAAKc,OACHE,MACA,KAAA,qBACFA,EAAAF,WAOAX,EAASoB,MAASD,WAClB,GAAIE,GAGJC,EAHID,EAAJvB,EAAA,4CACIwB,EAAAA,EAAJH,KAAA,KAIEE,QAAAA,GACAC,IAAAA,qBACAD,EAAA,SADAC,EAAazB,EAAYa,KAG3B,MAEEY,KAAAA,qBACAD,EAAA,QACFC,EAAAT,EAAAH,MAIAjB,OAAO8B,SAASC,KAKhBxB,EAAiBc,KAAG,YAClBE,aAAFK,EAAA,eAAAC,IAGAxB,EAAA,iBAASsB,GAASD,QAAlB,SAAAJ,GACAA,EAAAC,gBAEA,IAEAK,GACAC,EAHIG,EAAU3B,EAAE,4CAHZ4B,EAAKN,EAASD,KAAK,MAOrBE,EAAAA,EAAWd,MAAAC,KAAX,OAEA,QAAAkB,GAHF,IAAK,qBAKLL,EAAK,SACHA,EAAWxB,EAAXa,KACAY,MAEF,KAAA,qBACED,EAAA,QAXFC,EAAAT,EAAAH,MAoBAjB,OAAMkC,SAASH,KACbxB,EAAgB4B,KAAhB,YACD,aAAAP,EAAA,eAAAC,EAAA,SAAAG,IAGHZ,EAAAA,GAAAA,WAAqB,SAAUE,GAC7Bf,IAAAA,EAAAA,OADFA,EAAA4B,UAAAf,EAAkBC,GAAG,SAAU,WAO7Bd,EAAY6B,UAHd3B,EAAUY,GAAG,QAAS,SAAUC,GAS9BtB,GAFAsB,EAAAC,iBAEAvB,EAAAA,MAAAoC,SAAiB,cACfC,OAAAA,CAAQ,IAAAC,GAAAjC,EAAAS,MAAAY,KAAA,OAMR1B,QAAIe,MAAOwB,IAAIxB,iBANfsB,QAQAG,iBAAkBnC,EAAAS,MAAAC,KAAA,oBAChB0B,UAASC,EAAAA,MAAAA,KAAL,gBAGDC,KAAA,SAAAJ,GACF,GAJDxB,GAIOwB,EAAAxB,IAEHf,GAAAA,UACD,IAAAe,EAAA2B,aACF,KAAA3B,EAAA6B,kBACF5C,OAAAwB,MAAA,UAAAT,EAAA8B,QAAA,WAAA9B,EAAA6B,iBAAA,mBAnBHN,IATFtC,OAAA8B,SAAAC,KAAAO,MA8BGQ,MAAM,SAAUC,GACfC,QAAQD,MAAMA","file":"../javascripts/education.js","sourcesContent":["window.requirejs([\n  'common',\n  'bootstrap'\n],\nfunction (Util) {\n  'use strict';\n\n  var $ = $ || window.$;\n\n  var inputCourse = $('#inputCourse');\n  var selectAssignMonth = $('#selectAssignMonth');\n  var optSearchType = $('input[type=radio][name=optradio]');\n  var btnSearchCourse = $('#btnSearchCourse');\n  var $notActivelistItem = $('.list_item a.not-active');\n  var $listItem = $('.list_item');\n  var yearmonth;\n  var $inputSearchBy = $('#searchby');\n  var $inputSearchText = $('#searchtext');\n\n  $(function () {\n    $('.item_wrap').each(function (index) {\n      if (yearmonth === undefined || yearmonth !== $(this).data('yearmonth')) {\n        yearmonth = $(this).data('yearmonth');\n\n        $('<li class=\"yearmonth\"><i class=\"fa fa-calendar\" aria-hidden=\"true\"></i> ' + yearmonth + '</li>').insertBefore($(this));\n      }\n    });\n\n    if ($inputSearchBy.val()) {\n      switch ($inputSearchBy.val()) {\n      case 'course':\n        inputCourse.focus();\n        inputCourse.val($inputSearchText.val());\n        $('#radio-course-title').prop('checked', true);\n        break;\n      case 'month':\n        selectAssignMonth.focus();\n        selectAssignMonth.val($inputSearchText.val());\n        $('#radio-assign-month').prop('checked', true);\n        break;\n\n      default:\n        break;\n      }\n    }\n  });\n\n  inputCourse.on('focus', function () {\n    $('#radio-course-title').prop('checked', true);\n  });\n\n  selectAssignMonth.on('focus', function () {\n    $('#radio-assign-month').prop('checked', true);\n  });\n\n  $notActivelistItem.on('click', function (e) {\n    e.preventDefault();\n    window.alert('재수강이 불가한 강의입니다.');\n  });\n\n  optSearchType.change(function () {\n    var id = $(this).attr('id');\n    switch (id) {\n    case 'radio-course-title':\n      inputCourse.focus();\n      break;\n    case 'radio-assign-month':\n      selectAssignMonth.focus();\n      break;\n    default:\n      break;\n    }\n  });\n\n  btnSearchCourse.click(function () {\n    var btnRadio = $('input[type=radio][name=optradio]:checked');\n    var id = btnRadio.attr('id');\n    var searchBy;\n    var searchText;\n\n    switch (id) {\n    case 'radio-course-title':\n      searchBy = 'course';\n      searchText = inputCourse.val();\n      break;\n\n    case 'radio-assign-month':\n      searchBy = 'month';\n      searchText = selectAssignMonth.val();\n      break;\n    default:\n      break;\n    }\n\n    window.location.href =\n      btnSearchCourse.data('redirect') +\n        '?searchby=' + searchBy + '&searchtext=' + searchText;\n  });\n\n  $('.pagination a').on('click', function (e) {\n    e.preventDefault();\n\n    var btnRadio = $('input[type=radio][name=optradio]:checked');\n    var id = btnRadio.attr('id');\n    var searchBy;\n    var searchText;\n    var pageNum = $(this).data('page');\n\n    switch (id) {\n    case 'radio-course-title':\n      searchBy = 'course';\n      searchText = inputCourse.val();\n      break;\n\n    case 'radio-assign-month':\n      searchBy = 'month';\n      searchText = selectAssignMonth.val();\n      break;\n    default:\n      break;\n    }\n\n    window.location.href =\n      btnSearchCourse.data('redirect') +\n        '?searchby=' + searchBy + '&searchtext=' + searchText + '&page=' + pageNum;\n  });\n\n  inputCourse.on('keypress', function (e) {\n    if (e.which == 13) {\n      btnSearchCourse.click();\n    }\n  });\n\n  selectAssignMonth.on('change', function () {\n    btnSearchCourse.click();\n  });\n\n  $listItem.on('click', function (e) {\n    e.preventDefault();\n\n    if ($(this).hasClass('not-active')) {\n      return false;\n    }\n\n    var url = $(this).attr('href');\n\n    window.axios.get('/course/check', {\n      params: {\n        training_user_id: $(this).data('training-user-id'),\n        course_id: $(this).data('course-id')\n      }\n    })\n    .then(function (res) {\n      var data = res.data;\n\n      if (data.success) {\n        if (data.can_progress !== 1) {\n          if (data.prev_course_name !== '') {\n            window.alert('교육과정 : ' + data.eduName + '\\n' + '강의명 : ' + data.prev_course_name + '\\n' + '\\n을 먼저 이수하세요.');\n          }\n        } else {\n          if (url) {\n            window.location.href = url;\n          }\n        }\n      }\n    })\n    .catch(function (error) {\n      console.error(error);\n    });\n  });\n});\n"]}