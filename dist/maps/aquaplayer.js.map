{"version":3,"sources":["aquaplayer.js"],"names":["window","requirejs","Util","navigator","userAgent","match","deviceType","getDeviceType","params","get","userid","device_type","then","console","time","res","Date","data","iosUrl","location","href","log","setTimeout","now","getTime","androidUrl","catch","err","on","startPlayer"],"mappings":"AAAA,YACAA,QAAOC,WAAPD,UAGIA,SAASE,GAMP,QAAKC,KACH,MAAAA,WAAAC,UAAAC,MAAA,YAAAF,UAAAC,UAAAC,MAAA,SACSF,MACFA,UAAPC,UAAAC,MAAA,YACSF,UACFA,UAAPC,UAAAC,MAAA,QACD,UADQ,GAKT,QAAIC,KAAJ,GAAIA,GAAaC,GAGfC,QAAAA,MAAQC,IAAA,sBACNC,QACAC,OAAAA,IAFMA,YAAAL,KAORM,KAAIN,SAAAA,GAEFO,GADAA,QAAIC,IAAQC,EAAIC,MACAC,QAAhBJ,EAAqBK,CACrBlB,GAAAA,IAAOmB,GAASC,OAAOL,SADvBF,SAAQQ,IAAIN,EAAIE,KAAKC,QAGrBI,OAAAA,SAAWF,KAAYL,EAAAE,KAAAC,OAEnBI,WAAIC,WACJD,WAAWR,YACFK,GAAPH,OAAkBQ,UACnBV,EAAA,MAJHd,OAAAmB,SAAA,8DAOG,KACLN,SACuBE,YAAhBI,IACRN,QAAAQ,IAAAN,EAAAE,KAAAQ,YAEFC,OAAMP,SAAAC,KAAeL,EAAAE,KAAAQ,cAGvBC,MAAA,SAAAC,GAlDLd,QAAAQ,IAAAM,KAIMd,OAAAA,EAAQQ,iBAARO,GAAA,QAAA,WACAC,QAAAA,IAAAA,UAFFA","file":"../javascripts/aquaplayer.js","sourcesContent":["'use strict';\nwindow.requirejs(\n  ['common'],\n  function (Util) {\n    window.$('#start-player').on('click', function () {\n      console.log('start!');\n      startPlayer();\n    });\n\n    function getDeviceType () {\n      if ((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPad/i))) {\n        return 'ios';\n      } else if (navigator.userAgent.match(/Android/i)) {\n        return 'android';\n      } else if (navigator.userAgent.match(/Mac/i)) {\n        return 'mac';\n      }\n    };\n\n    function startPlayer () {\n      var deviceType = getDeviceType();\n\n      window.axios.get('/api/v1/aquaplayer', {\n        params: {\n          userid: 123,\n          device_type: deviceType\n        }\n      })\n      .then(function (res) {\n        console.log(res.data);\n        if (deviceType === 'iOS') {\n          var time = (new Date()).getTime();\n          console.log(res.data.iosUrl);\n          window.location.href = res.data.iosUrl;\n\n          setTimeout(function () {\n            setTimeout(function () {\n              var now = (new Date()).getTime();\n              if ((now - time) < 400) {\n                window.location = 'https://itunes.apple.com/kr/app/aquanmanager/id1048325731';\n              }\n            }, 10);\n          }, 300);\n        } else if (deviceType === 'Android') {\n          console.log(res.data.androidUrl);\n          window.location.href = res.data.androidUrl;\n        }\n      })\n      .catch(function (err) {\n        console.log(err);\n      });\n    };\n  }\n);\n"]}