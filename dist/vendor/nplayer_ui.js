function initNPlayerUI(e){function t(e){return e.originalEvent&&e.originalEvent.changedTouches?e.originalEvent.changedTouches[0].pageX:e.pageX}function n(){e.setMute(!e.getMute())}function u(){e.setFullscreen(!e.getFullscreen())}function r(t){e.setCurrentPlaybackRate(t)}function i(e){jQuery(".control_text_status").text(e)}function o(t){if(!(t<0)){var n=e.getDuration(),u=(0<n?t/n*100:0)+"%";b.style.left=u,f.style.width=u,m||g.text(y(t))}}function a(e){e==1/0?(jQuery("#text_divider").hide(),jQuery("#text_duration").text("")):jQuery("#text_duration").text(y(e))}function c(e){for(var t=.5;t<=2.1;t+=.1){var n=t.toFixed(1).replace(".","");jQuery(".btn_s"+n+"_cur").removeClass("btn_s"+n+"_cur").addClass("btn_s"+n),jQuery(".btn_s"+n+"_dot_cur").removeClass("btn_s"+n+"_dot_cur").addClass("btn_s"+n+"_dot")}n=e.toFixed(1).replace(".",""),jQuery(".btn_s"+n).removeClass("btn_s"+n).addClass("btn_s"+n+"_cur"),jQuery(".btn_s"+n+"_dot").removeClass("btn_s"+n+"_dot").addClass("btn_s"+n+"_dot_cur")}function s(e){e<=0?jQuery(".sound_btn > .btn_sound").removeClass("btn_sound").addClass("btn_soundMute"):jQuery(".sound_btn > .btn_soundMute").removeClass("btn_soundMute").addClass("btn_sound"),jQuery(".sound_track_cur").css("width",100*e+"%")}function l(t){e.getVolume()<=0&&(t=!0),t?(jQuery(".sound_btn > .btn_sound").removeClass("btn_sound").addClass("btn_soundMute"),jQuery(".sound_track_cur").css("width","0%")):(jQuery(".sound_btn > .btn_soundMute").removeClass("btn_soundMute").addClass("btn_sound"),jQuery(".sound_track_cur").css("width",100*e.getVolume()+"%"))}function d(t){if(e.getABRepeat()){jQuery(".control_repeat > .btn_repeat").removeClass("btn_repeat").addClass("btn_repeatHover");var n=e.getRepeatPointA()/e.getDuration()*100+"%",u=e.getRepeatPointB()/e.getDuration()*100+"%",r=(e.getRepeatPointB()-e.getRepeatPointA())/e.getDuration()*100+"%";jQuery(".track_repeatBtnA").css("left",n).show(),jQuery(".track_repeatBtnB").css("left",u).show(),jQuery(".track_repeat").css("left",n).css("width",r).show()}else jQuery(".control_repeat > .btn_repeatHover").removeClass("btn_repeatHover").addClass("btn_repeat"),jQuery(".track_repeatBtnA").hide(),jQuery(".track_repeatBtnB").hide(),jQuery(".track_repeat").hide()}function p(e){switch(e){case NPlayer.PlayState.Playing:return"Playing";case NPlayer.PlayState.Paused:return"Paused";case NPlayer.PlayState.Stopped:return"Stopped"}}function y(e){function t(e){return e<10?"0"+e:e}e||(e=0);var n=parseInt(e)%60,u=parseInt(e/60)%60;return[t(parseInt(e/60/60)),t(u),t(n)].join(":")}g__nplayer_internal_object=e;var _=!1,m=!1;jQuery(".wrapper_foot a").click(function(e){e.preventDefault()}),jQuery(".wrapper_foot").each(function(){this.onselectstart=function(){return!1},this.unselectable="on",jQuery(this).css("user-select","none"),jQuery(this).css("-o-user-select","none"),jQuery(this).css("-moz-user-select","none"),jQuery(this).css("-khtml-user-select","none"),jQuery(this).css("-webkit-user-select","none")}),jQuery(".btn_play").click(function(){e.getPlayState()==NPlayer.PlayState.Playing?e.pause():e.play()}),jQuery(".btn_sound").click(n),jQuery(".btn_soundMute").click(n),jQuery(".btn_fullScr").click(u),jQuery(".btn_normalScr").click(u),jQuery(".btn_repeat").click(function(){e.setABRepeat(!e.getABRepeat())}),jQuery(".btn_seekPrev").click(function(){e.setFrameStep(parseInt(jQuery(".input_setSeekTime").val())),e.seek(e.getCurrentPlaybackTime()-e.getFrameStep(),0,0)}),jQuery(".btn_seekNext").click(function(){e.setFrameStep(parseInt(jQuery(".input_setSeekTime").val())),e.seek(e.getCurrentPlaybackTime()+e.getFrameStep(),0,0)}),jQuery(".btn_s06").click(function(){r(.6)}),jQuery(".btn_s07").click(function(){r(.7)}),jQuery(".btn_s08").click(function(){r(.8)}),jQuery(".btn_s09").click(function(){r(.9)}),jQuery(".btn_s10").click(function(){r(1)}),jQuery(".btn_s11").click(function(){r(1.1)}),jQuery(".btn_s12").click(function(){r(1.2)}),jQuery(".btn_s13").click(function(){r(1.3)}),jQuery(".btn_s14").click(function(){r(1.4)}),jQuery(".btn_s15").click(function(){r(1.5)}),jQuery(".btn_s16").click(function(){r(1.6)}),jQuery(".btn_s17").click(function(){r(1.7)}),jQuery(".btn_s18").click(function(){r(1.8)}),jQuery(".btn_s19").click(function(){r(1.9)}),jQuery(".btn_s20").click(function(){r(2)}),jQuery(".btn_s06_dot").click(function(){r(.6)}),jQuery(".btn_s07_dot").click(function(){r(.7)}),jQuery(".btn_s08_dot").click(function(){r(.8)}),jQuery(".btn_s09_dot").click(function(){r(.9)}),jQuery(".btn_s10_dot").click(function(){r(1)}),jQuery(".btn_s11_dot").click(function(){r(1.1)}),jQuery(".btn_s12_dot").click(function(){r(1.2)}),jQuery(".btn_s13_dot").click(function(){r(1.3)}),jQuery(".btn_s14_dot").click(function(){r(1.4)}),jQuery(".btn_s15_dot").click(function(){r(1.5)}),jQuery(".btn_s16_dot").click(function(){r(1.6)}),jQuery(".btn_s17_dot").click(function(){r(1.7)}),jQuery(".btn_s18_dot").click(function(){r(1.8)}),jQuery(".btn_s19_dot").click(function(){r(1.9)}),jQuery(".btn_s20_dot").click(function(){r(2)}),jQuery(document).bind("webkitfullscreenchange",npExitHandler),jQuery(".input_setSeekTime").blur(function(){var t=parseInt(jQuery(this).val());(t<0||isNaN(t))&&(t=1),jQuery(this).val(t),e.setFrameStep(t)}),jQuery(".track_back").bind("mousedown touchstart",function(n){function u(n){if(isNaN(e.getDuration()))return-1;var u=(t(n)-i.offset().left)/i.width()*e.getDuration(),r=e.getRepeatPointA(),o=e.getRepeatPointB();return-1!=r&&u<r&&(u=r),-1!=o&&o<u&&(u=o),u<0?u=0:u>e.getDuration()&&(u=e.getDuration()),u}function r(e){o(u(e)),e.preventDefault()}var i=jQuery(this);e.getSeekable()&&(_=!0,o(u(n)),jQuery(document).bind("mouseup touchend",function t(n){_=!1,e.setCurrentPlaybackTime(u(n)),jQuery(document).unbind("mousemove touchmove",r),jQuery(document).unbind("mouseup touchend",t)}),jQuery(document).bind("mousemove touchmove",r))}),jQuery(".track_repeatBtnA").bind("mousedown touchstart",function(n){function u(n){var u=(t(n)-o.offset().left)/o.width()*e.getDuration();return u<0?u=0:u>e.getRepeatPointB()&&(u=e.getRepeatPointB()),u}function r(t){var n=t/e.getDuration()*100+"%",u=(e.getRepeatPointB()-t)/e.getDuration()*100+"%";jQuery(".track_repeatBtnA").css("left",n),jQuery(".track_repeat").css("left",n).css("width",u),jQuery("#text_currentTime").text(y(t))}function i(e){r(u(e)),e.preventDefault()}var o=jQuery(this).parent();m=!0,r(u(n)),jQuery(document).bind("mouseup touchend",function t(n){m=!1,e.setRepeatPointA(u(n)),d(),jQuery(document).unbind("mousemove touchmove",i),jQuery(document).unbind("mouseup touchend",t)}),jQuery(document).bind("mousemove touchmove",i),n.stopPropagation()}),jQuery(".track_repeatBtnB").bind("mousedown touchstart",function(n){function u(n){var u=(t(n)-o.offset().left)/o.width()*e.getDuration();return u<e.getRepeatPointA()?u=e.getRepeatPointA():u>e.getDuration()&&(u=e.getDuration()),u}function r(t){var n=t/e.getDuration()*100+"%",u=(t-e.getRepeatPointA())/e.getDuration()*100+"%";jQuery(".track_repeatBtnB").css("left",n),jQuery(".track_repeat").css("width",u),jQuery("#text_currentTime").text(y(t))}function i(e){r(u(e)),e.preventDefault()}var o=jQuery(this).parent();m=!0,r(u(n)),jQuery(document).bind("mouseup touchend",function t(n){m=!1,e.setRepeatPointB(u(n)),d(),jQuery(document).unbind("mousemove touchmove",i),jQuery(document).unbind("mouseup touchend",t)}),jQuery(document).bind("mousemove touchmove",i),n.stopPropagation()}),jQuery(".sound_track_back").bind("mousedown touchstart",function(n){function u(e){var n=(t(e)-i.offset().left)/i.width();return n<0?n=0:1<n&&(n=1),n}function r(t){e.setVolume(u(t))}var i=jQuery(this);e.setVolume(u(n)),jQuery(document).bind("mouseup touchend",function t(n){e.setVolume(u(n)),jQuery(document).unbind("mousemove touchmove",r),jQuery(document).unbind("mouseup touchend",t)}),jQuery(document).bind("mousemove touchmove",r)}),e.bindEvent("OpenStateChanged",function(t){switch(t){case NPlayer.OpenState.Opened:s(e.getVolume()),l(e.getMute()),c(e.getCurrentPlaybackRate()),a(e.getDuration()),e.isControlBox()||e.setFrameStep(Number(jQuery(".input_setSeekTime").val()));break;case NPlayer.OpenState.Closed:o(0),a(0)}i(function(e){switch(e){case NPlayer.OpenState.Opening:return"Opening";case NPlayer.OpenState.Opened:return"Opened";case NPlayer.OpenState.Closing:return"Closing";case NPlayer.OpenState.Closed:return"Closed"}}(t))}),e.bindEvent("PlayStateChanged",function(t){switch(t){case NPlayer.PlayState.Playing:jQuery(".control_play > .btn_play").removeClass("btn_play").addClass("btn_pause");break;case NPlayer.PlayState.Paused:jQuery(".control_play > .btn_pause").removeClass("btn_pause").addClass("btn_play");break;case NPlayer.PlayState.Stopped:jQuery(".control_play > .btn_pause").removeClass("btn_pause").addClass("btn_play"),o(0<=e.getBeginPlaybackPosition()?e.getBeginPlaybackPosition():0)}i(p(t))}),e.bindEvent("BufferingData",function(t){i(t?"Buffering":p(e.getPlayState()))}),e.bindEvent("RateChanged",c),e.bindEvent("VolumeChanged",s),e.bindEvent("MuteChanged",l),e.bindEvent("RepeatPointAChanged",d),e.bindEvent("RepeatPointBChanged",d),e.bindEvent("PlaybackRangeChanged",function(t,n){if(0<=t&&0<=n){var u=t/e.getDuration()*100+"%",r=(n-t)/e.getDuration()*100+"%";jQuery(".track_range").css("left",u).css("width",r).show()}else jQuery(".track_range").hide()}),e.bindEvent("FrameStepChanged",function(e){jQuery(".input_setSeekTime").val(e)}),e.bindEvent("UpdateTime",function(e){_||o(e)}),e.bindEvent("DurationChanged",function(){a(e.getDuration())}),e.bindEvent("Macfullscreenchange",function(e){"true"==e?nplayerOnFullscreen():nplayerExitFullscreen()}),e.onGetControlBoxHeight=function(){return parseInt(jQuery(".wrapper_foot").height())},s(e.getVolume()),l(e.getMute()),c(e.getCurrentPlaybackRate()),a(e.getDuration());var b=jQuery(".track_seekBtn").get(0),f=jQuery(".track_current").get(0),g=jQuery("#text_currentTime")}function nplayerOnFullscreen(){0!=jQuery("#pinned").length&&jQuery("#pinned").attr("checked")||$(".wrapper_foot").delay(3e3).animate({opacity:"0"},10),$(".wrapper_foot").bind("mouseenter",function(){$(this).stop(!0,!0).css("opacity","1")}).bind("mouseleave",function(){0!=jQuery("#pinned").length&&jQuery("#pinned").attr("checked")||$(this).delay(3e3).animate({opacity:"0"},10)}),$("a.btn_fullScr").removeClass("btn_fullScr").addClass("btn_normalScr"),hideContextMenu()}function nplayerExitFullscreen(){$(".wrapper_foot").stop(!0,!0).css("opacity","1"),$(".wrapper_foot").unbind("mouseenter").unbind("mouseleave"),$("a.btn_normalScr").removeClass("btn_normalScr").addClass("btn_fullScr"),hideContextMenu()}function npExitHandler(){var e=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString();document.webkitIsFullScreen&&e?$(".input_setSeekTime").css({"pointer-events":"none",opacity:"0.7"}):$(".input_setSeekTime").css({"pointer-events":"",opacity:""})}function showContextMenu(e){var t=g__nplayer_internal_object;if(t){g__init_contextmenu||initContextMenu(e),$(".np-menuitem").removeClass("show"),t.getPlayState()==NPlayer.PlayState.Paused?$(".np-menuitem-btnplay").addClass("show"):t.getPlayState()==NPlayer.PlayState.Playing&&$(".np-menuitem-btnpause").addClass("show"),t.getFullscreen()?$(".np-menuitem-btnnormalscreen").addClass("show"):$(".np-menuitem-btnfullscreen").addClass("show"),0<t.getSubtitleCount()&&(0==t.getSubtitleVisible()?$(".np-menuitem-subtitle-show").addClass("show"):$(".np-menuitem-subtitle-hide").addClass("show")),document.getElementsByTagName("video")[0].webkitSupportsPresentationMode&&"function"==typeof document.getElementsByTagName("video")[0].webkitSetPresentationMode&&("inline"==document.getElementsByTagName("video")[0].webkitPresentationMode?$(".np-menuitem-pipshow").addClass("show"):$(".np-menuitem-piphide").addClass("show")),$(".np-menuitem.np-menuitem-custom").addClass("show"),$(".np-vheight").height(32*$(".np-menuitem.show").length+16);var n=e.pageX+5,u=e.pageY+5,r=$("#"+g__fullscreen_layout_id__+" video").innerWidth(),i=$("#"+g__fullscreen_layout_id__+" video").innerHeight();if(0<$(".np-contextmenu[data-enable='true']").length&&0<r&&0<i){var o=$(".np-contextmenu[data-enable='true']").width(),a=$(".np-contextmenu[data-enable='true']").height();r<n+o+5&&i<u+a+5?(u-=a+7,n-=o+7):(i<u+a+5&&(u=i-a-5),r<n+o+5&&(n=r-o-5)),$(".np-contextmenu[data-enable='true']").css({top:u+"px",left:n+"px"}).fadeIn(80)}return!1}}function hideContextMenu(){$(".np-contextmenu").hide()}function initContextMenu(e){var t=g__nplayer_internal_object;g__init_contextmenu=!0,$(".np-menuitem").bind("click",function(){hideContextMenu()}),$(".np-menuitem-btnplay").bind("click",function(){t.play()}),$(".np-menuitem-btnpause").bind("click",function(){t.pause()}),$(".np-menuitem-btnfullscreen").bind("click",function(){t.setFullscreen(!0)}),$(".np-menuitem-btnnormalscreen").bind("click",function(){t.setFullscreen(!1)}),$(".np-menuitem-subtitle-show").bind("click",function(){t.setSubtitleVisible(!0)}),$(".np-menuitem-subtitle-hide").bind("click",function(){t.setSubtitleVisible(!1)}),$(".np-menuitem-pipshow").bind("click",function(){document.getElementsByTagName("video")[0].webkitSetPresentationMode("picture-in-picture")}),$(".np-menuitem-piphide").bind("click",function(){document.getElementsByTagName("video")[0].webkitSetPresentationMode("inline")})}var g__nplayer_internal_object;jQuery(document).bind("contextmenu",function(e){e.preventDefault()}),jQuery(document).bind("click",function(e){3!=e.which&&hideContextMenu()}),jQuery(document).bind("fullscreenchange",function(){document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement?nplayerOnFullscreen():nplayerExitFullscreen()}),jQuery(document).bind("webkitfullscreenchange",function(){document.webkitIsFullScreen?nplayerOnFullscreen():nplayerExitFullscreen()}),jQuery(document).bind("mozfullscreenchange",function(){document.mozFullScreen?nplayerOnFullscreen():nplayerExitFullscreen()}),jQuery(document).bind("MSFullscreenChange",function(){document.msFullscreenElement?nplayerOnFullscreen():nplayerExitFullscreen()});var g__init_contextmenu=!1,g__fullscreen_layout_id__="maincontent";