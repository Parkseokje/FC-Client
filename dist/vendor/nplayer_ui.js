function initNPlayerUI(e){function t(e){return e.originalEvent.changedTouches?e.originalEvent.changedTouches[0].pageX:e.pageX}function n(){e.getPlayState()==NPlayer.PlayState.Playing?e.pause():e.play()}function u(){e.setMute(!e.getMute())}function r(){e.setFullscreen(!e.getFullscreen())}function o(){e.setABRepeat(!e.getABRepeat())}function a(){e.setFrameStep(parseInt(jQuery(".input_setSeekTime").val())),e.setCurrentPlaybackTime(e.getCurrentPlaybackTime()-e.getFrameStep())}function c(){e.setFrameStep(parseInt(jQuery(".input_setSeekTime").val())),e.setCurrentPlaybackTime(e.getCurrentPlaybackTime()+e.getFrameStep())}function i(t){e.setCurrentPlaybackRate(t)}function s(e){jQuery(".control_text_status").text(e)}function l(t){if(!(t<0)){var n=e.getDuration(),u=(n>0?t/n*100:0)+"%";w.style.left=u,S.style.width=u,P||x.text(v(t))}}function d(e){jQuery("#text_duration").text(v(e))}function y(t){switch(t){case NPlayer.OpenState.Opened:b(e.getVolume()),f(e.getMute()),_(e.getCurrentPlaybackRate()),d(e.getDuration()),e.isControlBox()||e.setFrameStep(Number(jQuery(".input_setSeekTime").val()));break;case NPlayer.OpenState.Closed:l(0),d(0)}s(Q(t))}function p(t){switch(t){case NPlayer.PlayState.Playing:jQuery(".control_play > .np_btn_play").removeClass("np_btn_play").addClass("btn_pause");break;case NPlayer.PlayState.Paused:jQuery(".control_play > .btn_pause").removeClass("btn_pause").addClass("np_btn_play");break;case NPlayer.PlayState.Stopped:jQuery(".control_play > .btn_pause").removeClass("btn_pause").addClass("np_btn_play"),l(e.getBeginPlaybackPosition()>=0?e.getBeginPlaybackPosition():0)}s(k(t))}function m(t){s(t?"Buffering":k(e.getPlayState()))}function _(e){for(var t=.5;t<=2.1;t+=.1){var n=t.toFixed(1).replace(".","");jQuery(".btn_s"+n+"_cur").removeClass("btn_s"+n+"_cur").addClass("btn_s"+n),jQuery(".btn_s"+n+"_dot_cur").removeClass("btn_s"+n+"_dot_cur").addClass("btn_s"+n+"_dot")}var n=e.toFixed(1).replace(".","");jQuery(".btn_s"+n).removeClass("btn_s"+n).addClass("btn_s"+n+"_cur"),jQuery(".btn_s"+n+"_dot").removeClass("btn_s"+n+"_dot").addClass("btn_s"+n+"_dot_cur")}function b(e){e<=0?jQuery(".sound_btn > .btn_sound").removeClass("btn_sound").addClass("btn_soundMute"):jQuery(".sound_btn > .btn_soundMute").removeClass("btn_soundMute").addClass("btn_sound"),jQuery(".sound_track_cur").css("width",100*e+"%")}function f(t){e.getVolume()<=0&&(t=!0),t?(jQuery(".sound_btn > .btn_sound").removeClass("btn_sound").addClass("btn_soundMute"),jQuery(".sound_track_cur").css("width","0%")):(jQuery(".sound_btn > .btn_soundMute").removeClass("btn_soundMute").addClass("btn_sound"),jQuery(".sound_track_cur").css("width",100*e.getVolume()+"%"))}function g(t){if(e.getABRepeat()){jQuery(".control_repeat > .btn_repeat").removeClass("btn_repeat").addClass("btn_repeatHover");var n=e.getRepeatPointA()/e.getDuration()*100+"%",u=e.getRepeatPointB()/e.getDuration()*100+"%",r=(e.getRepeatPointB()-e.getRepeatPointA())/e.getDuration()*100+"%";jQuery(".track_repeatBtnA").css("left",n).show(),jQuery(".track_repeatBtnB").css("left",u).show(),jQuery(".track_repeat").css("left",n).css("width",r).show()}else jQuery(".control_repeat > .btn_repeatHover").removeClass("btn_repeatHover").addClass("btn_repeat"),jQuery(".track_repeatBtnA").hide(),jQuery(".track_repeatBtnB").hide(),jQuery(".track_repeat").hide()}function j(t,n){if(t>=0&&n>=0){var u=t/e.getDuration()*100+"%",r=(n-t)/e.getDuration()*100+"%";jQuery(".track_range").css("left",u).css("width",r).show()}else jQuery(".track_range").hide()}function h(e){jQuery(".input_setSeekTime").val(e)}function Q(e){switch(e){case NPlayer.OpenState.Opening:return"Opening";case NPlayer.OpenState.Opened:return"Opened";case NPlayer.OpenState.Closing:return"Closing";case NPlayer.OpenState.Closed:return"Closed"}}function k(e){switch(e){case NPlayer.PlayState.Playing:return"Playing";case NPlayer.PlayState.Paused:return"Paused";case NPlayer.PlayState.Stopped:return"Stopped"}}function v(e){function t(e){return e<10?"0"+e:e}e||(e=0);var n=parseInt(e)%60,u=parseInt(e/60)%60;return[t(parseInt(e/60/60)),t(u),t(n)].join(":")}var C=!1,P=!1;jQuery(".wrapper_foot a").click(function(e){e.preventDefault()}),jQuery(".wrapper_foot").each(function(){this.onselectstart=function(){return!1},this.unselectable="on",jQuery(this).css("user-select","none"),jQuery(this).css("-o-user-select","none"),jQuery(this).css("-moz-user-select","none"),jQuery(this).css("-khtml-user-select","none"),jQuery(this).css("-webkit-user-select","none")}),jQuery(".np_btn_play").click(n),jQuery(".btn_sound").click(u),jQuery(".btn_soundMute").click(u),jQuery(".btn_fullScr").click(r),jQuery(".btn_normalScr").click(r),jQuery(".btn_repeat").click(o),jQuery(".btn_seekPrev").click(a),jQuery(".btn_seekNext").click(c),jQuery(".btn_s06").click(function(){i(.6)}),jQuery(".btn_s07").click(function(){i(.7)}),jQuery(".btn_s08").click(function(){i(.8)}),jQuery(".btn_s09").click(function(){i(.9)}),jQuery(".btn_s10").click(function(){i(1)}),jQuery(".btn_s11").click(function(){i(1.1)}),jQuery(".btn_s12").click(function(){i(1.2)}),jQuery(".btn_s13").click(function(){i(1.3)}),jQuery(".btn_s14").click(function(){i(1.4)}),jQuery(".btn_s15").click(function(){i(1.5)}),jQuery(".btn_s16").click(function(){i(1.6)}),jQuery(".btn_s17").click(function(){i(1.7)}),jQuery(".btn_s18").click(function(){i(1.8)}),jQuery(".btn_s19").click(function(){i(1.9)}),jQuery(".btn_s20").click(function(){i(2)}),jQuery(".btn_s06_dot").click(function(){i(.6)}),jQuery(".btn_s07_dot").click(function(){i(.7)}),jQuery(".btn_s08_dot").click(function(){i(.8)}),jQuery(".btn_s09_dot").click(function(){i(.9)}),jQuery(".btn_s10_dot").click(function(){i(1)}),jQuery(".btn_s11_dot").click(function(){i(1.1)}),jQuery(".btn_s12_dot").click(function(){i(1.2)}),jQuery(".btn_s13_dot").click(function(){i(1.3)}),jQuery(".btn_s14_dot").click(function(){i(1.4)}),jQuery(".btn_s15_dot").click(function(){i(1.5)}),jQuery(".btn_s16_dot").click(function(){i(1.6)}),jQuery(".btn_s17_dot").click(function(){i(1.7)}),jQuery(".btn_s18_dot").click(function(){i(1.8)}),jQuery(".btn_s19_dot").click(function(){i(1.9)}),jQuery(".btn_s20_dot").click(function(){i(2)}),jQuery(document).bind("webkitfullscreenchange",npExitHandler),jQuery(".input_setSeekTime").blur(function(){e.setFrameStep(parseInt(jQuery(this).val()))}),jQuery(".track_back").bind("mousedown touchstart",function(n){function u(n){var u=t(n)-a.offset().left,r=u/a.width()*e.getDuration();return r<0?r=0:r>e.getDuration()&&(r=e.getDuration()),r}function r(e){l(u(e)),e.preventDefault()}function o(t){C=!1,e.setCurrentPlaybackTime(e.getNearestKeyframeTimestamp(u(t))),jQuery(document).unbind("mousemove touchmove",r),jQuery(document).unbind("mouseup touchend",o)}var a=jQuery(this);C=!0,l(u(n)),jQuery(document).bind("mouseup touchend",o),jQuery(document).bind("mousemove touchmove",r),n.preventDefault()}),jQuery(".track_repeatBtnA").bind("mousedown touchstart",function(n){function u(n){var u=t(n)-c.offset().left,r=u/c.width()*e.getDuration();return r<0?r=0:r>e.getRepeatPointB()&&(r=e.getRepeatPointB()),r}function r(t){var n=t/e.getDuration()*100+"%",u=(e.getRepeatPointB()-t)/e.getDuration()*100+"%";jQuery(".track_repeatBtnA").css("left",n),jQuery(".track_repeat").css("left",n).css("width",u),jQuery("#text_currentTime").text(v(t))}function o(e){r(u(e)),e.preventDefault()}function a(t){P=!1,e.setRepeatPointA(u(t)),jQuery(document).unbind("mousemove touchmove",o),jQuery(document).unbind("mouseup touchend",a)}var c=jQuery(this).parent();P=!0,r(u(n)),jQuery(document).bind("mouseup touchend",a),jQuery(document).bind("mousemove touchmove",o),n.preventDefault(),n.stopPropagation()}),jQuery(".track_repeatBtnB").bind("mousedown touchstart",function(n){function u(n){var u=t(n)-c.offset().left,r=u/c.width()*e.getDuration();return r<e.getRepeatPointA()?r=e.getRepeatPointA():r>e.getDuration()&&(r=e.getDuration()),r}function r(t){var n=t/e.getDuration()*100+"%",u=(t-e.getRepeatPointA())/e.getDuration()*100+"%";jQuery(".track_repeatBtnB").css("left",n),jQuery(".track_repeat").css("width",u),jQuery("#text_currentTime").text(v(t))}function o(e){r(u(e)),e.preventDefault()}function a(t){P=!1,e.setRepeatPointB(u(t)),jQuery(document).unbind("mousemove touchmove",o),jQuery(document).unbind("mouseup touchend",a)}var c=jQuery(this).parent();P=!0,r(u(n)),jQuery(document).bind("mouseup touchend",a),jQuery(document).bind("mousemove touchmove",o),n.preventDefault(),n.stopPropagation()}),jQuery(".sound_track_back").bind("mousedown touchstart",function(n){function u(e){var n=t(e)-a.offset().left,u=n/a.width();return u<0?u=0:u>1&&(u=1),u}function r(t){e.setVolume(u(t)),t.preventDefault()}function o(t){e.setVolume(u(t)),jQuery(document).unbind("mousemove touchmove",r),jQuery(document).unbind("mouseup touchend",o)}var a=jQuery(this);e.setVolume(u(n)),jQuery(document).bind("mouseup touchend",o),jQuery(document).bind("mousemove touchmove",r),n.preventDefault()}),e.bindEvent("OpenStateChanged",y),e.bindEvent("PlayStateChanged",p),e.bindEvent("BufferingData",m),e.bindEvent("RateChanged",_),e.bindEvent("VolumeChanged",b),e.bindEvent("MuteChanged",f),e.bindEvent("RepeatPointAChanged",g),e.bindEvent("RepeatPointBChanged",g),e.bindEvent("PlaybackRangeChanged",j),e.bindEvent("FrameStepChanged",h),e.bindEvent("UpdateTime",function(e){C||l(e)}),e.onGetControlBoxHeight=function(){return parseInt(jQuery(".wrapper_foot").height())},b(e.getVolume()),f(e.getMute()),_(e.getCurrentPlaybackRate()),d(e.getDuration());var w=jQuery(".track_seekBtn").get(0),S=jQuery(".track_current").get(0),x=jQuery("#text_currentTime")}function nplayerOnFullscreen(){$(".wrapper_foot").delay(3e3).animate({opacity:"0"},10),$(".wrapper_foot").bind("mouseenter",function(){$(this).stop(!0,!0).css("opacity","1")}).bind("mouseleave",function(){$(this).delay(3e3).animate({opacity:"0"},10)}),$("a.btn_fullScr").removeClass("btn_fullScr").addClass("btn_normalScr"),$("body").addClass("nplayer-fullscreen"),hideContextMenu()}function nplayerExitFullscreen(){$(".wrapper_foot").stop(!0,!0).css("opacity","1"),$(".wrapper_foot").unbind("mouseenter").unbind("mouseleave"),$("a.btn_normalScr").removeClass("btn_normalScr").addClass("btn_fullScr"),$("body").removeClass("nplayer-fullscreen"),hideContextMenu()}function npExitHandler(){var e=/constructor/i.test(window.HTMLElement)||function(e){return"[object SafariRemoteNotification]"===e.toString()}(!window.safari||safari.pushNotification);document.webkitIsFullScreen&&e?$(".input_setSeekTime").css({"pointer-events":"none",opacity:"0.7"}):$(".input_setSeekTime").css({"pointer-events":"",opacity:""})}function showContextMenu(e){if(player){g__init_contextmenu||initContextMenu(e),$(".np-menuitem").removeClass("show"),player.getPlayState()==NPlayer.PlayState.Paused?$(".np-menuitem-btnplay").addClass("show"):player.getPlayState()==NPlayer.PlayState.Playing&&$(".np-menuitem-btnpause").addClass("show"),player.getFullscreen()?$(".np-menuitem-btnnormalscreen").addClass("show"):$(".np-menuitem-btnfullscreen").addClass("show"),document.getElementsByTagName("video").length>0&&document.getElementsByTagName("video")[0].textTracks.length>0&&("hidden"==document.getElementsByTagName("video")[0].textTracks[0].mode?$(".np-menuitem-subtitle-show").addClass("show"):"showing"==document.getElementsByTagName("video")[0].textTracks[0].mode&&$(".np-menuitem-subtitle-hide").addClass("show")),$(".np-menuitem.np-menuitem-custom").addClass("show"),$(".np-vheight").height(32*$(".np-menuitem.show").length+16);var t=e.pageY+5,n=e.pageX;return $(".np-contextmenu[data-enable='true']").css({top:t+"px",left:n+"px"}).fadeIn(80),!1}}function hideContextMenu(){$(".np-contextmenu").hide()}function showTrack(){document.getElementsByTagName("video")[0].textTracks[0].mode="showing"}function hideTrack(){document.getElementsByTagName("video")[0].textTracks[0].mode="hidden"}function initContextMenu(e){g__init_contextmenu=!0,$(".np-menuitem").bind("click",function(){hideContextMenu()}),$(".np-menuitem-btnplay").bind("click",function(){player.play()}),$(".np-menuitem-btnpause").bind("click",function(){player.pause()}),$(".np-menuitem-btnfullscreen").bind("click",function(){player.setFullscreen(!0)}),$(".np-menuitem-btnnormalscreen").bind("click",function(){player.setFullscreen(!1)}),$(".np-menuitem-subtitle-show").bind("click",function(){showTrack()}),$(".np-menuitem-subtitle-hide").bind("click",function(){hideTrack()})}jQuery(document).bind("contextmenu",function(e){e.preventDefault()}),jQuery(document).bind("click",function(e){3!=e.which&&hideContextMenu()}),jQuery(document).bind("webkitfullscreenchange",function(){document.webkitIsFullScreen?nplayerOnFullscreen():nplayerExitFullscreen()}),jQuery(document).bind("mozfullscreenchange",function(){document.mozFullScreen?nplayerOnFullscreen():nplayerExitFullscreen()}),jQuery(document).bind("MSFullscreenChange",function(){document.msFullscreenElement?nplayerOnFullscreen():nplayerExitFullscreen()});var g__init_contextmenu=!1,g__fullscreen_layout_id__="maincontent";